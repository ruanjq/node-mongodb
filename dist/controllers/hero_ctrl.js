"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.addHero=exports.deleteById=exports.updateById=exports.queryByKeywords=exports.queryById=exports.queryAll=void 0;var _hero_models=require("../models/hero_models"),_hero_models2=_interopRequireDefault(_hero_models),queryAll=exports.queryAll=function(e,s,t){_hero_models2.default.find().then(function(e){s.json({status:1,msg:"success",data:e})}).catch(function(){s.json({status:0,msg:"error"})})},queryById=exports.queryById=function(e,s,t){var r=e.params.id;if(!r)return s.json({status:0,msg:"缺少ID参数"});_hero_models2.default.find({id:r}).then(function(e){return s.json({status:1,msg:"success",data:e})}).catch(function(e){return s.json({status:0,msg:"error"})})},queryByKeywords=exports.queryByKeywords=function(e,s,t){var r=e.query.keywords;if(!r)return s.json({status:0,msg:"缺少搜索关键词"});var o=new RegExp(r,"i");_hero_models2.default.find({name:{$regex:o}}).then(function(e){return s.json({status:1,msg:"success",data:e})}).catch(function(e){return s.json({status:0,msg:"error"})})},updateById=exports.updateById=function(e,s,t){var r=e.params.id,o=e.body.name;return r?o?void _hero_models2.default.update({id:r},{name:o}).then(function(e){return s.json({status:1,msg:"success",data:e})}).catch(function(e){return s.json({status:0,msg:"error"})}):s.json({status:0,msg:"缺少name参数"}):s.json({status:0,msg:"缺少ID参数"})},deleteById=exports.deleteById=function(e,s,t){var r=e.params.id;if(!r)return s.json({status:0,msg:"缺少ID参数"});_hero_models2.default.remove({id:r}).then(function(e){return s.json({status:1,msg:"success"})}).catch(function(e){return s.json({status:0,msg:"error"})})},addHero=exports.addHero=function(e,s,t){var r=e.body.name;if(!r)return s.json({status:0,msg:"name 值不为空"});_hero_models2.default.add({name:r}).then(function(e){return s.json({status:1,msg:"success",data:e})}).catch(function(e){return s.json({status:0,msg:"添加失败"})})};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRyb2xsZXJzL2hlcm9fY3RybC5qcyJdLCJuYW1lcyI6WyJfaGVyb19tb2RlbHMiLCJyZXF1aXJlIiwicXVlcnlBbGwiLCJyZXEiLCJyZXMiLCJuZXh0IiwiX2hlcm9fbW9kZWxzMiIsImRlZmF1bHQiLCJmaW5kIiwidGhlbiIsInJlc3VsdCIsImpzb24iLCJzdGF0dXMiLCJtc2ciLCJkYXRhIiwiY2F0Y2giLCJxdWVyeUJ5SWQiLCJpZCIsImVyciIsInF1ZXJ5QnlLZXl3b3JkcyIsInF1ZXJ5Iiwia2V5d29yZHMiLCJyZWciLCJSZWdFeHAiLCJuYW1lIiwiJHJlZ2V4IiwidXBkYXRlQnlJZCIsInBhcmFtcyIsImRlbGV0ZUJ5SWQiLCJyZW1vdmUiLCJkb2NzIiwiYWRkSGVybyIsImJvZHkiLCJhZGQiXSwibWFwcGluZ3MiOiJvUUFFQSxJQUFBQSxhQUFBQyxRQUFBLDRFQUdhQyxTQUFBQSxRQUFBQSxTQUFXLFNBQUNDLEVBQUlDLEVBQUlDLEdBQ2hDQyxjQUFBQyxRQUFRQyxPQUFPQyxLQUFLLFNBQUFDLEdBSnJCTixFQUFBTyxNQUFBQyxPQUFBLEVBQUFDLElBQUEsVUFBQUMsS0FBQUosTUFNSUssTUFBTSxXQUNSWCxFQUFJTyxNQUFPQyxPQUFRLEVBQUdDLElBQUssYUFINUJHLFVBQUFBLFFBQUFBLFVBQUEsU0FBUVIsRUFBUkosRUFBZUssR0FDUkwsSUFBQUEsRUFBQUEsRUFBSU8sT0FBSlAsR0FDTixJQUZEYSxFQUVHRixPQUFNWCxFQUFBTyxNQUFVQyxPQUFBLEVBQUFDLElBQUEsV0FDbEJULGNBQUFBLFFBQUFBLE1BQUlPLEdBQUtNLElBQUVMLEtBQUYsU0FBQUYsR0FIVixPQUFBTixFQUFBTyxNQUFBQyxPQUFBLEVBQUFDLElBQUEsVUFBQUMsS0FBQUosTUFETUssTUFBQSxTQUFBRyxHQWVDLE9BQU9kLEVBQUlPLE1BQU9DLE9BQVEsRUFBR0MsSUFBSyxhQUZsQ00sZ0JBQUFBLFFBQUFBLGdCQUFrQlAsU0FBQUEsRUFBRlIsRUFBYVMsR0FDbkMsSUFBRUUsRUFBTVosRUFBQWlCLE1BQUEsU0FDRixJQUFBQyxFQUFPakIsT0FBU0EsRUFBRVEsTUFBRkEsT0FBa0IsRUFBQUMsSUFBbEMsWUFDSCxJQUpKUyxFQUFBLElBQUFDLE9BQUFGLEVBQUEsS0FITWYsY0FBQUMsUUFBQUMsTUFBQWdCLE1BQUFDLE9BQUFILEtBQUFiLEtBQUEsU0FBQUMsR0FnQkMsT0FBT04sRUFBSU8sTUFBT0MsT0FBUSxFQUFHQyxJQUFLLFVBQVVDLEtBQU1KLE1BTDdDUyxNQUFBQSxTQUFBQSxHQUNMRSxPQUFBQSxFQUFXbEIsTUFBSWlCLE9BQU0sRUFBQVAsSUFBekIsYUFJSWEsV0FBQUEsUUFBQUEsV0FBa0JkLFNBQUFBLEVBQUFBLEVBQUZQLEdBQ25CLElBRkRZLEVBRUdGLEVBQU1ZLE9BQU5aLEdBQ0NTLEVBQUFyQixFQUFPQyxLQUFQLEtBUEQsT0FBQWEsRUFnQkNPLE9BTERsQixjQUFBQyxRQUFNbUIsUUFBQUEsR0FBQUEsSUFBQUEsS0FBQUEsSUFBQUEsS0FBYSxTQUFBaEIsR0FDckJPLE9BQUtkLEVBQUl3QixNQUFPZixPQUFwQixFQUFBQyxJQUFBLFVBQUFDLEtBQUFKLE1BQ0FLLE1BQUlTLFNBQUFBLEdBT0csT0FBT3BCLEVBQUlPLE1BQU9DLE9BQVEsRUFBR0MsSUFBSyxZQUpyQlQsRUFBSU8sTUFBT0MsT0FBUSxFQUFHQyxJQUFLLGFBaEJ6Q1QsRUFBQU8sTUFBQUMsT0FBQSxFQUFBQyxJQUFBLFlBbUJHZSxXQUFBQSxRQUFBQSxXQUFBLFNBQUF6QixFQUFPQyxFQUFBQyxHQUNULElBQUFZLEVBQUFkLEVBQU9DLE9BQVAsR0FDSCxJQUpKYSxFQUFBLE9BQUFiLEVBQUFPLE1BQUFDLE9BQUEsRUFBQUMsSUFBQSxXQU5NUCxjQUFBQyxRQUFBc0IsUUFBQVosR0FBQUEsSUFBQVIsS0FBQSxTQUFBcUIsR0FrQkMsT0FBTzFCLEVBQUlPLE1BQU9DLE9BQVEsRUFBR0MsSUFBSyxjQUo3QmUsTUFBQUEsU0FBQUEsR0FDTFgsT0FBS2QsRUFBSXdCLE1BQU9mLE9BQXBCLEVBQUFDLElBQUEsYUFLSWtCLFFBQUFBLFFBQUFBLFFBQU8sU0FBUzVCLEVBQUVTLEVBQVFQLEdBQzdCLElBSkRtQixFQUFBckIsRUFBQTZCLEtBQUEsS0FIRyxJQUFBUixFQUFBLE9BQUFwQixFQUFBTyxNQUFBQyxPQUFBLEVBQUFDLElBQUEsY0FjSFAsY0FBQUMsUUFBUTBCLEtBQU1ULEtBQU1BLElBQVFmLEtBQUssU0FBQXFCLEdBSHhCQyxPQUFBQSxFQUFBQSxNQUFBQSxPQUFVLEVBQUFsQixJQUFWa0IsVUFBVWpCLEtBQUFnQixNQUNuQmYsTUFBSVMsU0FBQUEsR0FDRCxPQUFPcEIsRUFBQU8sTUFBV0EsT0FBT0MsRUFBQUEsSUFBRiIsImZpbGUiOiJjb250cm9sbGVycy9oZXJvX2N0cmwuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuXHJcbmltcG9ydCBoZXJvRGFvIGZyb20gXCIuLi9tb2RlbHMvaGVyb19tb2RlbHNcIjtcclxuXHJcblxyXG5leHBvcnQgY29uc3QgcXVlcnlBbGwgPSAocmVxLHJlcyxuZXh0KSA9PiB7XHJcblx0aGVyb0Rhby5maW5kKCkudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgIHJlcy5qc29uKHsgc3RhdHVzOiAxLCBtc2c6ICdzdWNjZXNzJyxkYXRhOiByZXN1bHR9KTtcclxuXHR9KS5jYXRjaChmdW5jdGlvbigpe1xyXG5cdFx0cmVzLmpzb24oeyBzdGF0dXM6IDAsIG1zZzogJ2Vycm9yJyB9KTtcclxuXHR9KTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBjb25zdCBxdWVyeUJ5SWQgPSAocmVxLHJlcyxuZXh0KSA9PiB7XHJcblx0bGV0IGlkID0gcmVxLnBhcmFtc1tcImlkXCJdO1xyXG5cdGlmKCFpZCkgcmV0dXJuIHJlcy5qc29uKHsgc3RhdHVzOiAwLCBtc2c6ICfnvLrlsJFJROWPguaVsCcgfSk7XHJcblx0aGVyb0Rhby5maW5kKHtpZDppZH0pLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbih7IHN0YXR1czogMSwgbXNnOiAnc3VjY2VzcycsZGF0YTogcmVzdWx0fSk7XHJcblx0fSkuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oeyBzdGF0dXM6IDAsIG1zZzogJ2Vycm9yJyB9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IHF1ZXJ5QnlLZXl3b3JkcyA9IChyZXEscmVzLG5leHQpID0+IHtcclxuICAgIGxldCBrZXl3b3JkcyA9IHJlcS5xdWVyeVtcImtleXdvcmRzXCJdO1xyXG4gICAgaWYoIWtleXdvcmRzKSByZXR1cm4gcmVzLmpzb24oeyBzdGF0dXM6IDAsIG1zZzogJ+e8uuWwkeaQnOe0ouWFs+mUruivjScgfSk7XHJcbiAgICBjb25zdCByZWcgPSBuZXcgUmVnRXhwKGtleXdvcmRzLCAnaScpO1xyXG4gICAgaGVyb0Rhby5maW5kKHtuYW1lOnskcmVnZXggOiByZWd9fSkudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKHsgc3RhdHVzOiAxLCBtc2c6ICdzdWNjZXNzJyxkYXRhOiByZXN1bHR9KTtcclxuICAgIH0pLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKHsgc3RhdHVzOiAwLCBtc2c6ICdlcnJvcicgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHVwZGF0ZUJ5SWQgPSAocmVxLHJlcyxuZXh0KSA9PiB7XHJcblx0bGV0IGlkID0gcmVxLnBhcmFtc1tcImlkXCJdO1xyXG5cdGxldCBuYW1lID0gcmVxLmJvZHlbXCJuYW1lXCJdO1xyXG5cclxuXHRpZighaWQpIHJldHVybiByZXMuanNvbih7IHN0YXR1czogMCwgbXNnOiAn57y65bCRSUTlj4LmlbAnIH0pO1xyXG4gICAgaWYoIW5hbWUpIHJldHVybiByZXMuanNvbih7IHN0YXR1czogMCwgbXNnOiAn57y65bCRbmFtZeWPguaVsCcgfSk7XHJcblx0aGVyb0Rhby51cGRhdGUoe2lkOmlkfSx7bmFtZTpuYW1lfSkudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKHsgc3RhdHVzOiAxLCBtc2c6ICdzdWNjZXNzJyxkYXRhOiByZXN1bHR9KTtcclxuXHR9KS5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbih7IHN0YXR1czogMCwgbXNnOiAnZXJyb3InIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgY29uc3QgZGVsZXRlQnlJZCA9IChyZXEsIHJlcywgbmV4dCkgPT4ge1xyXG4gICAgbGV0IGlkID0gcmVxLnBhcmFtc1tcImlkXCJdO1xyXG4gICAgaWYoIWlkKSByZXR1cm4gcmVzLmpzb24oeyBzdGF0dXM6IDAsIG1zZzogJ+e8uuWwkUlE5Y+C5pWwJyB9KTtcclxuICAgIGhlcm9EYW8ucmVtb3ZlKHsgaWQ6IGlkIH0pLnRoZW4oZG9jcyA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKHsgc3RhdHVzOiAxLCBtc2c6ICdzdWNjZXNzJ30pO1xyXG4gICAgfSkuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oeyBzdGF0dXM6IDAsIG1zZzogJ2Vycm9yJ30pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IGFkZEhlcm8gPSAocmVxLCByZXMsIG5leHQpID0+IHtcclxuICAgIGxldCBuYW1lID0gcmVxLmJvZHlbXCJuYW1lXCJdO1xyXG4gICAgaWYoIW5hbWUpIHJldHVybiByZXMuanNvbih7IHN0YXR1czogMCwgbXNnOiAnbmFtZSDlgLzkuI3kuLrnqbonIH0pO1xyXG4gICAgaGVyb0Rhby5hZGQoeyBuYW1lOiBuYW1lIH0pLnRoZW4oZG9jcyA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKHsgc3RhdHVzOiAxLCBtc2c6ICdzdWNjZXNzJyxkYXRhOmRvY3N9KTtcclxuICAgIH0pLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKHsgc3RhdHVzOiAwLCBtc2c6ICfmt7vliqDlpLHotKUnfSk7XHJcbiAgICB9KTtcclxufTsiXX0=
