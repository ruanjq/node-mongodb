"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.deleteMenu=exports.saveMenu=exports.getAllMenu=void 0;var _menu_models=require("../models/menu_models"),_menu_models2=_interopRequireDefault(_menu_models),getAllMenu=exports.getAllMenu=function(e,n,t,u){var l=[{$group:{_id:"$menu_level",menu_level:{$first:"$menu_level"},menu_name:{$first:"$menu_name"},list:{$push:"$$ROOT"}}},{$sort:{menu_level:1}}];return _menu_models2.default.aggregate(l).then(function(e){console.log(e),n.render(u,{title:"菜单列表",menuList:e})}).catch(function(){n.render(u,{title:"菜单列表"})})},saveMenu=exports.saveMenu=function(e,n,t){var u=e.body;console.log(u),_menu_models2.default.add(u).then(function(e){n.redirect("/menu/list")}).catch(function(){n.redirect("/menu/list")})},deleteMenu=exports.deleteMenu=function(e,n,t){if(!e.params.id)return n.redirect("/menu/list")};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRyb2xsZXJzL21lbnVfY3RybC5qcyJdLCJuYW1lcyI6WyJfbWVudV9tb2RlbHMiLCJyZXF1aXJlIiwiZ2V0QWxsTWVudSIsInJlcSIsInJlcyIsIm5leHQiLCJ0ZW1wbGF0ZSIsInF1ZXJ5T2JqIiwiJGdyb3VwIiwiX2lkIiwibWVudV9sZXZlbCIsIiRmaXJzdCIsIm1lbnVfbmFtZSIsImxpc3QiLCIkcHVzaCIsIiRzb3J0IiwiX21lbnVfbW9kZWxzMiIsImRlZmF1bHQiLCJhZ2dyZWdhdGUiLCJ0aGVuIiwiZG9jcyIsImNvbnNvbGUiLCJsb2ciLCJyZW5kZXIiLCJ0aXRsZSIsIm1lbnVMaXN0IiwiY2F0Y2giLCJyZXN1bHQiLCJfbWVudSIsImJvZHkiLCJkYXRhIiwicmVkaXJlY3QiLCJzYXZlTWVudSIsInBhcmFtcyJdLCJtYXBwaW5ncyI6IjBNQUNBLElBQUFBLGFBQUFDLFFBQUEsNEVBR2FDLFdBQUFBLFFBQUFBLFdBQWEsU0FBQ0MsRUFBSUMsRUFBSUMsRUFBS0MsR0FDdkMsSUFBSUMsSUFBYUMsUUFBUUMsSUFBSSxjQUFjQyxZQUFZQyxPQUFPLGVBQWVDLFdBQVdELE9BQU8sY0FBY0UsTUFBUUMsTUFBTyxhQUFjQyxPQUFPTCxXQUFXLEtBQzVKLE9BQU9NLGNBQUFDLFFBQVFDLFVBQVVYLEdBQVVZLEtBQU0sU0FBQUMsR0FMMUNDLFFBQUFDLElBQUFGLEdBT0VoQixFQUFJbUIsT0FBT2pCLEdBQ1ZrQixNQUFNLE9BQ05DLFNBQVNMLE1BRVJNLE1BQU0sV0FSSHRCLEVBQU1GLE9BQUFBLEdBQ1pzQixNQUFJakIsWUE0QklvQixTQUFBQSxRQUFBQSxTQUFQLFNBQUF4QixFQUFBQyxFQUFBQyxHQUNBLElBQUF1QixFQUFBekIsRUFBQTBCLEtBU0RSLFFBQVFDLElBQUlNLEdBUFpaLGNBQUFDLFFBQUlhLElBQU9GLEdBQVhULEtBQUEsU0FBQUMsR0FoQ01oQixFQUFBMkIsU0FBQSxnQkEwQ0hMLE1BQU0sV0FMSHRCLEVBQU00QixTQUFBQSxpQkFJUEQsV0FBQUEsUUFBQUEsV0FBUyxTQUFiNUIsRUFBQUMsRUFBQUMsR0FFQUQsSUFEUUQsRUFBQThCLE9BQUEsR0FGVCxPQUFBN0IsRUFBQTJCLFNBQUEiLCJmaWxlIjoiY29udHJvbGxlcnMvbWVudV9jdHJsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbmltcG9ydCBtZW51RGFvIGZyb20gJy4uL21vZGVscy9tZW51X21vZGVscyc7XHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IGdldEFsbE1lbnUgPSAocmVxLHJlcyxuZXh0LHRlbXBsYXRlKSA9PiB7XHJcblx0bGV0IHF1ZXJ5T2JqID0gW3skZ3JvdXA6e19pZDpcIiRtZW51X2xldmVsXCIsbWVudV9sZXZlbDp7JGZpcnN0OlwiJG1lbnVfbGV2ZWxcIn0sbWVudV9uYW1lOnskZmlyc3Q6XCIkbWVudV9uYW1lXCJ9LGxpc3Q6IHsgJHB1c2g6IFwiJCRST09UXCIgfX19LHskc29ydDp7bWVudV9sZXZlbDoxfX1dO1xyXG5cdHJldHVybiBtZW51RGFvLmFnZ3JlZ2F0ZShxdWVyeU9iaikudGhlbiggZG9jcyA9PiB7XHJcblx0XHRjb25zb2xlLmxvZyhkb2NzKTtcclxuXHRcdHJlcy5yZW5kZXIodGVtcGxhdGUse1xyXG5cdFx0XHR0aXRsZTpcIuiPnOWNleWIl+ihqFwiLFxyXG5cdFx0XHRtZW51TGlzdDpkb2NzXHJcblx0XHR9KTtcclxuXHR9KS5jYXRjaCgoKSA9PiB7XHJcblx0XHRyZXMucmVuZGVyKHRlbXBsYXRlLHtcclxuXHRcdFx0dGl0bGU6XCLoj5zljZXliJfooahcIlxyXG5cdFx0fSk7XHJcblx0fSk7XHJcblxyXG5cclxuXHRmdW5jdGlvbiBkYXRhRm9ybWF0KGRhdGEpe1xyXG5cdFx0dmFyIHJlc3VsdCA9IFtdO1xyXG5cdFx0Ly8g5b6q546v6I+c5Y2V57qn5Yir57G75Z6LXHJcblx0XHRkYXRhLmZvckVhY2goKGksaXRlbSkgPT4ge1xyXG5cdFx0XHRpZihpID09IDApe1xyXG5cdFx0XHRcdGl0ZW1baV0ubGlzdC5mb3JFYWNoKChqLG5pdGVtKSA9PntcclxuXHRcdFx0XHRcdHJlc3VsdC5wdXNoKG5pdGVtKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0aXRlbVtpXS5saXN0LmZvckVhY2goKGosbml0ZW0pID0+e1xyXG5cdFx0XHRcdFx0cmVzdWx0LnB1c2gobml0ZW0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdHJldHVybiByZXN1bHQ7XHJcblx0fVxyXG5cclxuXHR2YXIgZGF0YSA9IHtcclxuXHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgY29uc3Qgc2F2ZU1lbnUgPSAocmVxLHJlcyxuZXh0KSA9PntcclxuXHRsZXQgX21lbnUgPSByZXEuYm9keTtcclxuXHRjb25zb2xlLmxvZyhfbWVudSk7XHJcblx0bWVudURhby5hZGQoX21lbnUpLnRoZW4oZG9jcyA9PiB7XHJcblx0XHRyZXMucmVkaXJlY3QoXCIvbWVudS9saXN0XCIpXHJcblx0fSkuY2F0Y2goKCkgPT4ge1xyXG5cdFx0cmVzLnJlZGlyZWN0KFwiL21lbnUvbGlzdFwiKVxyXG5cdH0pO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZGVsZXRlTWVudSA9IChyZXEscmVzLG5leHQpID0+IHtcclxuXHRsZXQgaWQgPSByZXEucGFyYW1zW1wiaWRcIl07XHJcbiAgICBpZiAoIWlkKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5yZWRpcmVjdChcIi9tZW51L2xpc3RcIik7XHJcbiAgICB9ZWxzZXtcclxuXHJcbiAgICB9XHJcbn1cclxuXHJcbiJdfQ==
