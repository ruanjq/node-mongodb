"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _promise=require("babel-runtime/core-js/promise"),_promise2=_interopRequireDefault(_promise),_user_schema=require("../schemas/user_schema"),_user_schema2=_interopRequireDefault(_user_schema),_collections=require("./collections"),_collections2=_interopRequireDefault(_collections),mongoose=require("mongoose"),User=mongoose.model(_collections2.default.user,_user_schema2.default),userDao={};userDao.find=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments[1];0==e?User.find().exec(r):User.find(e).exec(r)},userDao.findOne=function(e){return new _promise2.default(function(r,o){User.findOne(e,function(e,n){e?o(e):r(n)})})},userDao.remove=function(e){return new _promise2.default(function(r,o){User.remove(e,function(e,n){if(e)return o(e);1==n.result.ok?r(n):o(n)})})},userDao.add=function(e){return new _promise2.default(function(r,o){User.create(e,function(e,n){if(e)return o(e),handleError(e);r(n)})})},exports.default=userDao;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZGVscy91c2VyX21vZGVscy5qcyJdLCJuYW1lcyI6WyJfdXNlcl9zY2hlbWEiLCJyZXF1aXJlIiwiX2NvbGxlY3Rpb25zIiwibW9uZ29vc2UiLCJVc2VyIiwibW9kZWwiLCJfY29sbGVjdGlvbnMyIiwiZGVmYXVsdCIsInVzZXIiLCJfdXNlcl9zY2hlbWEyIiwidXNlckRhbyIsImZpbmQiLCJwYXJtcyIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsImNiIiwiZXhlYyIsImZpbmRPbmUiLCJwYXJhbXMiLCJfcHJvbWlzZTIiLCJyZXNvbHZlIiwicmVqZWN0IiwiZXJyIiwiZG9jcyIsInJlbW92ZSIsIm9rIiwiYWRkIiwiY3JlYXRlIiwicmVzIl0sIm1hcHBpbmdzIjoiNk9BQ0FBLGFBQUFDLFFBQUEsNkVBQ0FDLGFBQUFELFFBQUEsb0VBRk1FLFNBQVdGLFFBQVEsWUFJckJHLEtBQU9ELFNBQVNFLE1BQU1DLGNBQUFDLFFBQVlDLEtBQTNCQyxjQUFBRixTQUVQRyxXQUVKQSxRQUFRQyxLQUFPLFdBQTBCLElBQWpCQyxFQUFpQkMsVUFBQUMsT0FBQSxRQUFBQyxJQUFBRixVQUFBLElBQUFBLFVBQUEsR0FBSEcsRUFBR0gsVUFBQSxHQUM1QixHQUFURCxFQUFnQlIsS0FBS08sT0FBT00sS0FBS0QsR0FSckNaLEtBQUFPLEtBQUFDLEdBQUFLLEtBQUFELElBWUFOLFFBQVFRLFFBQVUsU0FBQUMsR0FYbEIsT0FBQSxJQUFBQyxVQUFBYixRQUFBLFNBQUFjLEVBQUFDLEdBYUVsQixLQUFLYyxRQUFRQyxFQUFRLFNBQUNJLEVBQUlDLEdBQ3RCRCxFQUNGRCxFQUFPQyxHQUVQRixFQUFRRyxRQU9aZCxRQUFRZSxPQUFTLFNBQUFOLEdBbEJqQlQsT0FBUUMsSUFBQUEsVUFBQUEsUUFBTyxTQUFBVSxFQUEwQkMsR0FBQWxCLEtBQWpCUSxPQUFpQk8sRUFBQSxTQUFBSSxFQUFBQyxHQUFBLEdBQUhSLEVBQUcsT0FBQU0sRUFBQUMsR0FDckJuQixHQUFoQlEsRUFBQUEsT0FBSGMsR0FEREwsRUFBQUcsR0FLQWQsRUFBUVEsUUFTTlIsUUFSRGlCLElBQUEsU0FBQW5CLEdBREQsT0FBQSxJQUFBWSxVQUFBYixRQUFBLFNBQUFjLEVBQUFDLEdBZ0NFbEIsS0FBS3dCLE9BQU9wQixFQUFNLFNBQVVlLEVBQUtNLEdBbkJuQ25CLEdBQUFBLEVBRUVOLE9BRERrQixFQUFPQyxHQUNERSxZQUFjRixHQUloQkYsRUFBUUcsd0JBTmJkIiwiZmlsZSI6Im1vZGVscy91c2VyX21vZGVscy5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZShcIm1vbmdvb3NlXCIpO1xyXG5pbXBvcnQgVXNlclNjaGVtYSBmcm9tIFwiLi4vc2NoZW1hcy91c2VyX3NjaGVtYVwiO1xyXG5pbXBvcnQgQ09MTEVDVElPTlMgZnJvbSBcIi4vY29sbGVjdGlvbnNcIlxyXG5cclxubGV0IFVzZXIgPSBtb25nb29zZS5tb2RlbChDT0xMRUNUSU9OUy51c2VyLFVzZXJTY2hlbWEpOyAgLy8gY29sbGVjX3VzZXJzICDooajnpLrmlbDmja7lupPpm4blkIjlkI3np7DvvIzlrZjliLDmlbDmja7lupPlkI3np7DkuLrlsI/lhplcclxuXHJcbmxldCB1c2VyRGFvID0ge307XHJcblxyXG51c2VyRGFvLmZpbmQgPSBmdW5jdGlvbihwYXJtcyA9IGZhbHNlLGNiKXtcclxuXHRpZihwYXJtcyA9PSBmYWxzZSkgVXNlci5maW5kKCkuZXhlYyhjYik7XHJcblx0ZWxzZSBVc2VyLmZpbmQocGFybXMpLmV4ZWMoY2IpXHJcbn1cclxuXHJcbnVzZXJEYW8uZmluZE9uZSA9IHBhcmFtcyA9PiB7XHJcblx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuXHRcdFVzZXIuZmluZE9uZShwYXJhbXMsIChlcnIsZG9jcykgPT4ge1xyXG5cdFx0XHRpZihlcnIpe1xyXG5cdFx0XHRcdHJlamVjdChlcnIpO1xyXG5cdFx0XHR9IGVsc2V7XHJcblx0XHRcdFx0cmVzb2x2ZShkb2NzKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fSk7XHJcbn1cclxuXHJcblxyXG51c2VyRGFvLnJlbW92ZSA9IHBhcmFtcyA9PiB7XHJcblx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuXHRcdFVzZXIucmVtb3ZlKHBhcmFtcywoZXJyLGRvY3MpID0+IHtcclxuXHRcdFx0aWYoZXJyKSByZXR1cm4gcmVqZWN0KGVycilcclxuXHRcdFx0ZWxzZXtcclxuXHRcdFx0XHRpZihkb2NzLnJlc3VsdC5vayA9PSAxKXtcclxuXHRcdFx0XHRcdHJlc29sdmUoZG9jcyk7XHJcblx0XHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0XHRyZWplY3QoZG9jcyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9KTtcclxufVxyXG5cclxuXHJcbnVzZXJEYW8uYWRkID0gZnVuY3Rpb24odXNlcil7XHJcblx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuXHRcdFVzZXIuY3JlYXRlKHVzZXIsIGZ1bmN0aW9uIChlcnIsIHJlcykge1xyXG5cdFx0XHRpZiAoZXJyKXtcclxuXHRcdFx0XHRyZWplY3QoZXJyKTtcclxuXHRcdFx0XHRyZXR1cm4gaGFuZGxlRXJyb3IoZXJyKVxyXG5cdFx0XHR9O1xyXG5cdFx0ICBcdC8vIHNhdmVkIVxyXG5cdFx0ICBcdHJlc29sdmUocmVzKTtcclxuXHRcdH0pXHJcblx0fSk7XHJcbn07XHJcblxyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHVzZXJEYW8iXX0=
