"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _promise=require("babel-runtime/core-js/promise"),_promise2=_interopRequireDefault(_promise),_hero_schema=require("../schemas/hero_schema"),_hero_schema2=_interopRequireDefault(_hero_schema),_collections=require("./collections"),_collections2=_interopRequireDefault(_collections),mongoose=require("mongoose"),autoIncrement=require("mongoose-auto-increment");_hero_schema2.default.plugin(autoIncrement.plugin,{model:_collections2.default.hero,field:"id",startAt:1,incrementBy:1});var Hero=mongoose.model(_collections2.default.hero,_hero_schema2.default),heroDao={};heroDao.find=function(e){return new _promise2.default(function(o,r){Hero.find(e,function(e,n){e?r(e):o(n)})})},heroDao.findOne=function(e){return new _promise2.default(function(o,r){Hero.findOne(e,function(e,n){e?r(e):o(n)})})},heroDao.update=function(e,o){return new _promise2.default(function(r,n){Hero.update(e,o,function(e,o){if(e)return n();r(o)})})},heroDao.remove=function(e){return new _promise2.default(function(o,r){Hero.remove(e,function(e,n){if(e)return r(e);1==n.result.ok?o(n):r(n)})})},heroDao.add=function(e){return new _promise2.default(function(o,r){Hero.create(e,function(e,n){if(e)return r(e);o(n)})})},exports.default=heroDao;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZGVscy9oZXJvX21vZGVscy5qcyJdLCJuYW1lcyI6WyJfaGVyb19zY2hlbWEiLCJyZXF1aXJlIiwiX2NvbGxlY3Rpb25zIiwibW9uZ29vc2UiLCJhdXRvSW5jcmVtZW50IiwiX2hlcm9fc2NoZW1hMiIsImRlZmF1bHQiLCJwbHVnaW4iLCJtb2RlbCIsIl9jb2xsZWN0aW9uczIiLCJoZXJvIiwiZmllbGQiLCJzdGFydEF0IiwiaW5jcmVtZW50QnkiLCJIZXJvIiwiaGVyb0RhbyIsImZpbmQiLCJwYXJhbXMiLCJfcHJvbWlzZTIiLCJyZXNvbHZlIiwicmVqZWN0IiwiZXJyIiwiZG9jcyIsImZpbmRPbmUiLCJ1cGRhdGUiLCJjb25kaXRpb25zIiwicmVtb3ZlIiwicmVzdWx0Iiwib2siLCJhZGQiLCJjcmVhdGUiLCJyZXMiXSwibWFwcGluZ3MiOiI2T0FFQUEsYUFBQUMsUUFBQSw2RUFDQUMsYUFBQUQsUUFBQSxvRUFITUUsU0FBV0YsUUFBUSxZQUNuQkcsY0FBZ0JILFFBQVEsMkJBSTlCSSxjQUFBQyxRQUFXQyxPQUFPSCxjQUFjRyxRQUM1QkMsTUFBT0MsY0FBQUgsUUFBWUksS0FDbkJDLE1BQU8sS0FDUEMsUUFBUyxFQUNUQyxZQUFhLElBR2pCLElBQUlDLEtBQU9YLFNBQVNLLE1BQU1DLGNBQUFILFFBQVlJLEtBQTNCTCxjQUFBQyxTQVRYUyxXQWFBQSxRQUFRQyxLQUFPLFNBQVNDLEdBQ3ZCLE9BQU8sSUFBQUMsVUFBQVosUUFBWSxTQUFDYSxFQUFTQyxHQUM1Qk4sS0FBS0UsS0FBS0MsRUFBTyxTQUFDSSxFQUFJQyxHQUNsQkQsRUFuQkFsQixFQUFBQSxHQXNCRmdCLEVBQVFHLFFBYlJULFFBQUFBLFFBQWEsU0FBQUksR0FKakIsT0FBQSxJQUFBQyxVQUFBWixRQUFBLFNBQUFhLEVBQUFDLEdBeUJFTixLQUFLUyxRQUFRTixFQUFRLFNBQUNJLEVBQUlDLEdBbEJ4QlIsRUFvQkFNLEVBQU9DLEdBRVBGLEVBQVFHLFFBYlJQLFFBRkRTLE9BRU0sU0FBQUMsRUFBQVIsR0FDTEUsT0FBQUEsSUFBQUEsVUFBQUEsUUFBQSxTQUFBQSxFQUFBQyxHQUNBTixLQUFBVSxPQUFBQyxFQUFBUixFQUFBLFNBQUFJLEVBQUFDLEdBTEYsR0FBQUQsRUFERCxPQUFBRCxJQTZCRUQsRUFBUUcsUUFiUFAsUUFGRFcsT0FFTSxTQUFBVCxHQUNMRSxPQUFBQSxJQUFBQSxVQUFBQSxRQUFBLFNBQUFBLEVBQUFDLEdBQ0FOLEtBQUFZLE9BQUFULEVBQUEsU0FBQUksRUFBQUMsR0FMRixHQUFBRCxFQUFBLE9BQUFELEVBQUFDLEdBRkYsR0FBQUMsRUFBQUssT0FBQUMsR0E4QktULEVBQVFHLEdBakJaRixFQUFPRSxRQTRCUlAsUUFBUWMsSUFBTSxTQUFTbkIsR0FqQnZCSyxPQUFRVyxJQUFBQSxVQUFBQSxRQUFTLFNBQUFQLEVBQUFDLEdBQ2hCTixLQUFBZ0IsT0FBT3BCLEVBQUEsU0FBWVcsRUFBQVUsR0FDbEJqQixHQUFLWSxFQUNKLE9BQUFOLEVBQVFDLEdBRVBGLEVBRUtZLHdCQXdCTWhCIiwiZmlsZSI6Im1vZGVscy9oZXJvX21vZGVscy5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZShcIm1vbmdvb3NlXCIpO1xyXG5jb25zdCBhdXRvSW5jcmVtZW50ID0gcmVxdWlyZShcIm1vbmdvb3NlLWF1dG8taW5jcmVtZW50XCIpO1xyXG5pbXBvcnQgSGVyb1NjaGVtYSBmcm9tIFwiLi4vc2NoZW1hcy9oZXJvX3NjaGVtYVwiO1xyXG5pbXBvcnQgQ09MTEVDVElPTlMgZnJvbSBcIi4vY29sbGVjdGlvbnNcIlxyXG5cclxuSGVyb1NjaGVtYS5wbHVnaW4oYXV0b0luY3JlbWVudC5wbHVnaW4se1xyXG4gICAgbW9kZWw6IENPTExFQ1RJT05TLmhlcm8sXHJcbiAgICBmaWVsZDogJ2lkJyxcclxuICAgIHN0YXJ0QXQ6IDEsXHJcbiAgICBpbmNyZW1lbnRCeTogMVxyXG59KTtcclxuXHJcbmxldCBIZXJvID0gbW9uZ29vc2UubW9kZWwoQ09MTEVDVElPTlMuaGVybyxIZXJvU2NoZW1hKTsgIFxyXG5cclxubGV0IGhlcm9EYW8gPSB7fTtcclxuXHJcbmhlcm9EYW8uZmluZCA9IGZ1bmN0aW9uKHBhcmFtcyl7XHJcblx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuXHRcdEhlcm8uZmluZChwYXJhbXMsKGVycixkb2NzKSA9PiB7XHJcblx0XHRcdGlmKGVycil7XHJcblx0XHRcdFx0cmVqZWN0KGVycik7XHJcblx0XHRcdH0gZWxzZXtcclxuXHRcdFx0XHRyZXNvbHZlKGRvY3MpO1xyXG5cdFx0XHR9XHJcblx0XHR9KVxyXG5cdH0pO1xyXG59XHJcblxyXG5oZXJvRGFvLmZpbmRPbmUgPSBwYXJhbXMgPT4ge1xyXG5cdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcblx0XHRIZXJvLmZpbmRPbmUocGFyYW1zLCAoZXJyLGRvY3MpID0+IHtcclxuXHRcdFx0aWYoZXJyKXtcclxuXHRcdFx0XHRyZWplY3QoZXJyKTtcclxuXHRcdFx0fSBlbHNle1xyXG5cdFx0XHRcdHJlc29sdmUoZG9jcyk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH0pO1xyXG59XHJcblxyXG5oZXJvRGFvLnVwZGF0ZSA9IChjb25kaXRpb25zLHBhcmFtcykgPT4ge1xyXG5cdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcblx0XHRIZXJvLnVwZGF0ZShjb25kaXRpb25zLHBhcmFtcywoZXJyLGRvY3MpID0+IHtcclxuXHRcdFx0aWYgKGVycil7XHJcblx0XHRcdFx0cmV0dXJuIHJlamVjdCgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJlc29sdmUoZG9jcyk7XHJcblx0XHR9KTtcclxuXHR9KTtcclxufVxyXG5cclxuXHJcbmhlcm9EYW8ucmVtb3ZlID0gcGFyYW1zID0+IHtcclxuXHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG5cdFx0SGVyby5yZW1vdmUocGFyYW1zLChlcnIsZG9jcykgPT4ge1xyXG5cdFx0XHRpZihlcnIpIHJldHVybiByZWplY3QoZXJyKVxyXG5cdFx0XHRlbHNle1xyXG5cdFx0XHRcdGlmKGRvY3MucmVzdWx0Lm9rID09IDEpe1xyXG5cdFx0XHRcdFx0cmVzb2x2ZShkb2NzKTtcclxuXHRcdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRcdHJlamVjdChkb2NzKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH0pO1xyXG59XHJcblxyXG5cclxuaGVyb0Rhby5hZGQgPSBmdW5jdGlvbihoZXJvKXtcclxuXHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG5cdFx0SGVyby5jcmVhdGUoaGVybywgZnVuY3Rpb24gKGVyciwgcmVzKSB7XHJcblx0XHRcdGlmIChlcnIpe1xyXG5cdFx0XHRcdHJldHVybiByZWplY3QoZXJyKTtcclxuXHRcdFx0fTtcclxuXHRcdCAgXHQvLyBzYXZlZCFcclxuXHRcdCAgXHRyZXNvbHZlKHJlcyk7XHJcblx0XHR9KVxyXG5cdH0pO1xyXG59O1xyXG5cclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBoZXJvRGFvOyJdfQ==
